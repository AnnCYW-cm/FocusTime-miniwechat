<!-- pages/history/history.wxml -->
<view class="container">
  <!-- æ—¥æœŸé€‰æ‹©å™¨ -->
  <view class="date-selector card">
    <picker mode="date" value="{{selectedDate}}" bindchange="onDateChange">
      <view class="date-display">
        <text class="date-icon">ğŸ“…</text>
        <text class="date-text">{{selectedDate}}</text>
        <text class="date-arrow">â–¼</text>
      </view>
    </picker>
  </view>

  <!-- å½“æ—¥ç»Ÿè®¡ -->
  <view wx:if="{{logs.length > 0}}" class="day-stats card">
    <view class="stats-row">
      <view class="stat-item-small">
        <text class="stat-icon-small">ğŸ…</text>
        <text class="stat-value-small">{{dayStats.count}}</text>
        <text class="stat-label">ç•ªèŒ„æ•°</text>
      </view>
      <view class="stat-item-small">
        <text class="stat-icon-small">â±</text>
        <text class="stat-value-small">{{dayStats.duration}}</text>
        <text class="stat-label">åˆ†é’Ÿ</text>
      </view>
    </view>
  </view>

  <!-- ç•ªèŒ„è®°å½•åˆ—è¡¨ -->
  <view wx:if="{{logs.length > 0}}" class="logs-section">
    <view class="section-title">ğŸ… ç•ªèŒ„è®°å½•</view>

    <view class="log-list">
      <view wx:for="{{logs}}" wx:key="_id" class="log-item">
        <view class="log-time">
          <text class="time-icon">â°</text>
          <text class="time-text">{{item.startTime}} - {{item.endTime}}</text>
        </view>
        <view class="log-content">
          <view class="log-main">
            <text class="log-task">{{item.taskTitle || 'ç‹¬ç«‹ç•ªèŒ„'}}</text>
            <view class="log-duration">
              <text class="duration-icon">â±</text>
              <text>{{item.duration}}åˆ†é’Ÿ</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:else class="empty-state">
    <text class="empty-icon">ğŸ“</text>
    <text class="empty-text">è¿™ä¸€å¤©è¿˜æ²¡æœ‰ç•ªèŒ„è®°å½•\né€‰æ‹©å…¶ä»–æ—¥æœŸæŸ¥çœ‹</text>
  </view>
</view>
